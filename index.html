<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalia√ß√£o de Ader√™ncia Cultural - Brasil Infra (Com Valida√ß√£o)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            background: #2B4366;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        .header h1 {
            color: #EDD730;
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header h2 {
            color: white;
            font-size: 24px;
            font-weight: 300;
        }

        .alert-info {
            background: #E3F2FD;
            border-left: 4px solid #2196F3;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #1565C0;
            font-size: 14px;
            line-height: 1.6;
        }

        .alert-info strong {
            display: block;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #2B4366;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #B3B3B3;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #2B4366;
        }

        .privacy-box {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #B3B3B3;
            margin-bottom: 20px;
            max-height: 250px;
            overflow-y: auto;
        }

        .privacy-box h3 {
            color: #2B4366;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .privacy-box p {
            color: #808080;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            margin-top: 2px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            font-weight: 400;
        }

        .btn {
            width: 100%;
            padding: 16px;
            background: #EDD730;
            color: #2B4366;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(237, 215, 48, 0.3);
        }

        .btn:hover {
            background: #D4C020;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(237, 215, 48, 0.4);
        }

        .btn:disabled {
            background: #B3B3B3;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .progress-bar-container {
            background: #B3B3B3;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-bar {
            background: linear-gradient(90deg, #EDD730 0%, #F4E24E 100%);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 6px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #808080;
            margin-bottom: 10px;
        }

        .progress-info strong {
            color: #2B4366;
        }

        .timer-box {
            background: #FFF3CD;
            border: 2px solid #FFC107;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
            color: #856404;
        }

        .questao {
            border: 2px solid #B3B3B3;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            background: white;
            transition: all 0.3s;
        }

        .questao.respondida {
            border-color: #EDD730;
            background: #FFFEF5;
        }

        .questao.controle {
            border-left: 4px solid #9C27B0;
        }

        .questao-header {
            margin-bottom: 15px;
        }

        .questao-numero {
            background: #2B4366;
            color: #EDD730;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 14px;
        }

        .questao-tag {
            display: inline-block;
            background: #9C27B0;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            margin-left: 8px;
            font-weight: 600;
        }

        .questao h3 {
            color: #2B4366;
            font-size: 18px;
            margin-top: 10px;
            line-height: 1.4;
        }

        .opcoes {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .opcao {
            flex: 1;
            text-align: center;
        }

        .opcao input[type="radio"] {
            display: none;
        }

        .opcao label {
            display: block;
            padding: 15px 10px;
            border: 2px solid #B3B3B3;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 14px;
            background: white;
        }

        .opcao input[type="radio"]:checked + label {
            background: #2B4366;
            color: white;
            border-color: #2B4366;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(43, 67, 102, 0.3);
        }

        .opcao label:hover {
            border-color: #2B4366;
            transform: translateY(-1px);
        }

        .escala-legenda {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 12px;
            color: #808080;
            padding: 0 5px;
        }

        .hidden {
            display: none;
        }

        .resultado-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .resultado-header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #2B4366 0%, #3A5A8C 100%);
            border-radius: 12px;
            margin-bottom: 30px;
            color: white;
        }

        .resultado-header h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .score-geral {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .percentual-geral {
            font-size: 64px;
            font-weight: 700;
            color: #EDD730;
        }

        .nivel-badge {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 18px;
            color: white;
        }

        /* Painel de Confiabilidade */
        .confiabilidade-panel {
            background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%);
            border: 3px solid #9C27B0;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .confiabilidade-panel h3 {
            color: #6A1B9A;
            font-size: 22px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .confiabilidade-score {
            font-size: 48px;
            font-weight: 700;
            text-align: center;
            margin: 20px 0;
        }

        .confiabilidade-score.alta {
            color: #4CAF50;
        }

        .confiabilidade-score.media {
            color: #FF9800;
        }

        .confiabilidade-score.baixa {
            color: #F44336;
        }

        .indicadores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .indicador-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #9C27B0;
        }

        .indicador-item.alerta {
            border-left-color: #FF5722;
            background: #FFEBEE;
        }

        .indicador-item.ok {
            border-left-color: #4CAF50;
            background: #F1F8E9;
        }

        .indicador-label {
            font-weight: 600;
            color: #424242;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .indicador-value {
            font-size: 18px;
            font-weight: 700;
            color: #6A1B9A;
        }

        .alerta-box {
            background: #FFEBEE;
            border-left: 4px solid #F44336;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .alerta-box h4 {
            color: #C62828;
            margin-bottom: 8px;
        }

        .alerta-box ul {
            margin-left: 20px;
            color: #D32F2F;
        }

        .valor-resultado {
            background: #F5F5F5;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 5px solid #2B4366;
        }

        .valor-resultado-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .valor-resultado h3 {
            color: #2B4366;
            font-size: 20px;
            margin-bottom: 5px;
        }

        .valor-resultado-desc {
            color: #808080;
            font-size: 14px;
        }

        .valor-score {
            text-align: right;
        }

        .valor-percentual {
            font-size: 36px;
            font-weight: 700;
            line-height: 1;
        }

        .valor-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
            color: white;
            margin-top: 5px;
        }

        .recomendacoes-box {
            background: #E3F2FD;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .recomendacoes-box h4 {
            color: #1565C0;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .recomendacoes-box ul {
            margin-left: 20px;
            color: #424242;
        }

        .recomendacoes-box li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2B4366;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .info-icon {
            background: #2196F3;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            cursor: help;
            margin-left: 5px;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #555;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            line-height: 1.4;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        @media (max-width: 768px) {
            .opcoes {
                flex-direction: column;
            }
            
            .score-geral {
                flex-direction: column;
            }
            
            .indicadores-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ETAPA 1: Identifica√ß√£o -->
        <div id="etapa-identificacao">
            <div class="header">
                <h1>üèóÔ∏è Brasil Infra</h1>
                <h2>Avalia√ß√£o de Ader√™ncia Cultural</h2>
            </div>

            <div class="card">
                <div class="alert-info">
                    <strong>üîí Sistema de Valida√ß√£o de Autenticidade</strong>
                    Esta avalia√ß√£o utiliza tecnologia avan√ßada de valida√ß√£o de respostas para garantir autenticidade e coer√™ncia. 
                    Responda com sinceridade - n√£o existem respostas certas ou erradas, apenas respostas verdadeiras sobre como voc√™ realmente √©.
                </div>

                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="nome" placeholder="Digite seu nome completo" required>
                </div>

                <div class="form-group">
                    <label>CPF (somente n√∫meros)</label>
                    <input type="text" id="cpf" placeholder="Digite seu CPF" maxlength="11" required>
                </div>

                <div class="privacy-box">
                    <h3>üìã Pol√≠tica de Privacidade e Uso de Dados</h3>
                    <p><strong>Coleta e Uso de Dados:</strong> As informa√ß√µes fornecidas nesta avalia√ß√£o ser√£o utilizadas exclusivamente para fins de an√°lise de ader√™ncia cultural e desenvolvimento profissional.</p>
                    <p><strong>Prote√ß√£o de Dados:</strong> Seus dados pessoais ser√£o tratados conforme a Lei Geral de Prote√ß√£o de Dados (LGPD - Lei n¬∫ 13.709/2018).</p>
                    <p><strong>Valida√ß√£o e Autenticidade:</strong> Este question√°rio utiliza algoritmos de detec√ß√£o de padr√µes de resposta para garantir a qualidade e autenticidade das avalia√ß√µes.</p>
                    <p><strong>Confidencialidade:</strong> As respostas ser√£o acessadas apenas pela equipe de RH e gest√£o, mantendo total confidencialidade.</p>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="aceite-lgpd">
                    <label for="aceite-lgpd">Li e aceito a Pol√≠tica de Privacidade e autorizo o tratamento dos meus dados conforme a LGPD</label>
                </div>

                <button class="btn" onclick="iniciarAvaliacao()" id="btn-iniciar">Iniciar Avalia√ß√£o</button>
            </div>
        </div>

        <!-- ETAPA 2: Avalia√ß√£o -->
        <div id="etapa-avaliacao" class="hidden">
            <div class="header">
                <h1>üèóÔ∏è Brasil Infra</h1>
                <h2>Avalia√ß√£o de Ader√™ncia Cultural</h2>
            </div>

            <div class="card">
                <div class="timer-box" id="timer-display">
                    ‚è±Ô∏è Tempo decorrido: <span id="tempo-total">0:00</span>
                </div>

                <div class="progress-info">
                    <span><strong id="respondidas-count">0</strong> de <strong id="total-count">40</strong> quest√µes respondidas</span>
                    <span id="percentual-progresso">0%</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
                </div>

                <div id="questoes-container">
                    <!-- As quest√µes ser√£o inseridas aqui dinamicamente -->
                </div>

                <button class="btn" onclick="finalizarAvaliacao()" id="btn-finalizar" disabled>Finalizar Avalia√ß√£o</button>
            </div>
        </div>

        <!-- ETAPA 3: Resultado -->
        <div id="etapa-resultado" class="hidden">
            <div class="header">
                <h1>üèóÔ∏è Brasil Infra</h1>
                <h2>Resultado da Avalia√ß√£o</h2>
            </div>

            <!-- Painel de Confiabilidade (exclusivo para RH) -->
            <div class="confiabilidade-panel">
                <h3>
                    üîç An√°lise de Confiabilidade das Respostas
                    <span class="tooltip">
                        <span class="info-icon">?</span>
                        <span class="tooltiptext">
                            Este painel √© vis√≠vel apenas para o RH. Analisa padr√µes de resposta para detectar poss√≠veis inconsist√™ncias ou manipula√ß√£o intencional/n√£o intencional.
                        </span>
                    </span>
                </h3>

                <div class="confiabilidade-score" id="score-confiabilidade">
                    <!-- Score ser√° inserido aqui -->
                </div>

                <div class="indicadores-grid" id="indicadores-container">
                    <!-- Indicadores ser√£o inseridos aqui -->
                </div>

                <div id="alertas-container">
                    <!-- Alertas ser√£o inseridos aqui se houver -->
                </div>
            </div>

            <!-- Resultado Geral -->
            <div class="resultado-container">
                <div class="resultado-header">
                    <h2 id="resultado-nome-colaborador"></h2>
                    <div class="score-geral">
                        <div class="percentual-geral" id="percentual-geral">0%</div>
                        <div>
                            <div class="nivel-badge" id="nivel-geral"></div>
                            <div style="margin-top: 10px; font-size: 16px;" id="descricao-nivel"></div>
                        </div>
                    </div>
                </div>

                <div id="valores-container">
                    <!-- Valores ser√£o inseridos aqui -->
                </div>

                <button class="btn" onclick="enviarResultado()" id="btn-enviar">Enviar Resultado para o RH</button>
            </div>
        </div>
    </div>

    <script>
        // Dados do colaborador
        let dadosColaborador = {
            nome: '',
            cpf: '',
            tempoInicio: null,
            tempoFim: null,
            temposPorQuestao: [],
            respostas: {},
            resultado: null,
            analiseConfiabilidade: null
        };

        // Valores culturais da Brasil Infra
        const valoresCulturais = {
            comprometimento: {
                nome: 'Comprometimento',
                descricao: 'Dedica√ß√£o e responsabilidade com resultados',
                questoes: [1, 2, 3, 19, 27] // IDs das quest√µes que avaliam este valor
            },
            trabalho_seguro: {
                nome: 'Trabalho Seguro',
                descricao: 'Prioriza√ß√£o da seguran√ßa em todas as atividades',
                questoes: [4, 5, 6, 7, 28, 36]
            },
            ambiente_saudavel: {
                nome: 'Ambiente Saud√°vel',
                descricao: 'Respeito, colabora√ß√£o e bem-estar no trabalho',
                questoes: [8, 9, 10, 11, 29, 37]
            },
            foco_resultado: {
                nome: 'Foco em Resultado',
                descricao: 'Orienta√ß√£o para metas e alta performance',
                questoes: [12, 13, 14, 15, 30]
            },
            mentalidade_crescimento: {
                nome: 'Mentalidade de Crescimento',
                descricao: 'Aprendizado cont√≠nuo e busca por evolu√ß√£o',
                questoes: [16, 17, 18, 20, 21, 31]
            }
        };

        // Quest√µes - incluindo quest√µes de controle e quest√µes reversas
        const questoes = [
            // COMPROMETIMENTO
            { id: 1, texto: 'Eu dou o meu melhor em todas as tarefas, mesmo nas mais simples', valor: 'comprometimento', tipo: 'normal' },
            { id: 2, texto: 'Quando assumo uma responsabilidade, fa√ßo quest√£o de cumpri-la at√© o fim', valor: 'comprometimento', tipo: 'normal' },
            { id: 3, texto: 'Assumo responsabilidade pelos meus erros sem buscar culpados', valor: 'comprometimento', tipo: 'normal' },
            
            // TRABALHO SEGURO
            { id: 4, texto: 'Sigo todos os procedimentos de seguran√ßa, mesmo quando ningu√©m est√° olhando', valor: 'trabalho_seguro', tipo: 'normal' },
            { id: 5, texto: 'Se vejo algo inseguro, sempre comunico imediatamente', valor: 'trabalho_seguro', tipo: 'normal' },
            { id: 6, texto: 'Nunca tomo atalhos que possam comprometer a seguran√ßa', valor: 'trabalho_seguro', tipo: 'normal' },
            { id: 7, texto: 'Prefiro perder prazo a fazer algo de forma insegura', valor: 'trabalho_seguro', tipo: 'normal' },
            
            // AMBIENTE SAUD√ÅVEL
            { id: 8, texto: 'Trato todos os colegas com respeito, independente do cargo', valor: 'ambiente_saudavel', tipo: 'normal' },
            { id: 9, texto: 'Procuro ajudar os colegas quando percebo que est√£o sobrecarregados', valor: 'ambiente_saudavel', tipo: 'normal' },
            { id: 10, texto: 'Evito fofocas e conversas que possam prejudicar colegas', valor: 'ambiente_saudavel', tipo: 'normal' },
            { id: 11, texto: 'Reconhe√ßo publicamente o bom trabalho dos meus colegas', valor: 'ambiente_saudavel', tipo: 'normal' },
            
            // FOCO EM RESULTADO
            { id: 12, texto: 'Estabele√ßo metas claras para meu trabalho e acompanho meu progresso', valor: 'foco_resultado', tipo: 'normal' },
            { id: 13, texto: 'Busco sempre melhorar meus resultados e superar expectativas', valor: 'foco_resultado', tipo: 'normal' },
            { id: 14, texto: 'Quando encontro obst√°culos, busco solu√ß√µes ao inv√©s de desistir', valor: 'foco_resultado', tipo: 'normal' },
            { id: 15, texto: 'Mantenho o foco nas prioridades mesmo com distra√ß√µes ao redor', valor: 'foco_resultado', tipo: 'normal' },
            
            // MENTALIDADE DE CRESCIMENTO
            { id: 16, texto: 'Encaro erros como oportunidades de aprendizado', valor: 'mentalidade_crescimento', tipo: 'normal' },
            { id: 17, texto: 'Busco ativamente aprender coisas novas relacionadas ao meu trabalho', valor: 'mentalidade_crescimento', tipo: 'normal' },
            { id: 18, texto: 'Pe√ßo feedback regularmente para melhorar meu desempenho', valor: 'mentalidade_crescimento', tipo: 'normal' },
            { id: 20, texto: 'Saio da minha zona de conforto para aceitar novos desafios', valor: 'mentalidade_crescimento', tipo: 'normal' },
            { id: 21, texto: 'Compartilho conhecimento com meus colegas de equipe', valor: 'mentalidade_crescimento', tipo: 'normal' },
            
            // QUEST√ïES DE CONTROLE - Desejabilidade Social Alta (comportamentos extremamente desej√°veis mas improv√°veis)
            { id: 22, texto: 'Eu NUNCA cheguei atrasado ao trabalho em toda minha vida profissional', valor: 'comprometimento', tipo: 'controle', subtipo: 'improvavel' },
            { id: 23, texto: 'Eu sempre cumpro 100% de todas as minhas metas sem exce√ß√£o', valor: 'foco_resultado', tipo: 'controle', subtipo: 'improvavel' },
            { id: 24, texto: 'NUNCA tive qualquer conflito com nenhum colega de trabalho', valor: 'ambiente_saudavel', tipo: 'controle', subtipo: 'improvavel' },
            { id: 25, texto: 'Jamais senti vontade de mudar de emprego ou de fun√ß√£o', valor: 'comprometimento', tipo: 'controle', subtipo: 'improvavel' },
            { id: 26, texto: 'Eu adoro cada segundo do meu trabalho todos os dias', valor: 'comprometimento', tipo: 'controle', subtipo: 'improvavel' },
            
            // QUEST√ïES DE CONTROLE - Admiss√£o de imperfei√ß√µes (comportamentos indesej√°veis mas comuns/honestos)
            { id: 27, texto: '√Äs vezes procrastino em tarefas que n√£o gosto de fazer', valor: 'comprometimento', tipo: 'controle', subtipo: 'honesto', reversa: true },
            { id: 28, texto: 'Ocasionalmente tomo pequenos atalhos quando tenho certeza que n√£o h√° risco', valor: 'trabalho_seguro', tipo: 'controle', subtipo: 'honesto', reversa: true },
            { id: 29, texto: 'J√° fiquei irritado com colegas de trabalho em situa√ß√µes de press√£o', valor: 'ambiente_saudavel', tipo: 'controle', subtipo: 'honesto', reversa: true },
            { id: 30, texto: 'Nem sempre consigo manter 100% de foco o dia todo', valor: 'foco_resultado', tipo: 'controle', subtipo: 'honesto', reversa: true },
            { id: 31, texto: '√Äs vezes evito situa√ß√µes muito desafiadoras por medo de falhar', valor: 'mentalidade_crescimento', tipo: 'controle', subtipo: 'honesto', reversa: true },
            
            // PARES CONTRADIT√ìRIOS (para detectar inconsist√™ncias)
            { id: 32, texto: 'Prefiro trabalhar sozinho e evito colabora√ß√£o em equipe', valor: 'ambiente_saudavel', tipo: 'contraditorio', par: 9, reversa: true },
            { id: 33, texto: 'Raramente busco aprender coisas novas, prefiro manter minha rotina', valor: 'mentalidade_crescimento', tipo: 'contraditorio', par: 17, reversa: true },
            { id: 34, texto: 'Frequentemente deixo tarefas pela metade quando surgem dificuldades', valor: 'comprometimento', tipo: 'contraditorio', par: 2, reversa: true },
            { id: 35, texto: 'Acho que seguir todos os procedimentos de seguran√ßa atrasa o trabalho', valor: 'trabalho_seguro', tipo: 'contraditorio', par: 4, reversa: true },
            
            // QUEST√ïES REVERSAS ADICIONAIS (formuladas de forma negativa)
            { id: 36, texto: 'Costumo comunicar problemas de seguran√ßa apenas quando s√£o muito graves', valor: 'trabalho_seguro', tipo: 'reversa', reversa: true },
            { id: 37, texto: 'Evito dar feedback aos colegas para n√£o criar constrangimento', valor: 'ambiente_saudavel', tipo: 'reversa', reversa: true },
            
            // QUEST√ïES ADICIONAIS DE CONTROLE TEMPORAL
            { id: 38, texto: 'Nunca tive um dia ruim no trabalho em toda minha carreira', valor: 'comprometimento', tipo: 'controle', subtipo: 'improvavel' },
            { id: 39, texto: 'Sempre estou 100% motivado, independente das circunst√¢ncias', valor: 'comprometimento', tipo: 'controle', subtipo: 'improvavel' },
            { id: 40, texto: 'Ocasionalmente tenho dificuldade para me concentrar em tarefas repetitivas', valor: 'foco_resultado', tipo: 'controle', subtipo: 'honesto', reversa: true }
        ];

        // Timer
        let timerInterval;

        function iniciarTimer() {
            dadosColaborador.tempoInicio = Date.now();
            timerInterval = setInterval(() => {
                const tempoDecorrido = Math.floor((Date.now() - dadosColaborador.tempoInicio) / 1000);
                const minutos = Math.floor(tempoDecorrido / 60);
                const segundos = tempoDecorrido % 60;
                document.getElementById('tempo-total').textContent = 
                    `${minutos}:${segundos.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function pararTimer() {
            clearInterval(timerInterval);
            dadosColaborador.tempoFim = Date.now();
        }

        // Iniciar avalia√ß√£o
        function iniciarAvaliacao() {
            const nome = document.getElementById('nome').value.trim();
            const cpf = document.getElementById('cpf').value.trim();
            const aceite = document.getElementById('aceite-lgpd').checked;

            if (!nome || !cpf) {
                alert('‚ö†Ô∏è Por favor, preencha todos os campos!');
                return;
            }

            if (cpf.length !== 11 || !/^\d+$/.test(cpf)) {
                alert('‚ö†Ô∏è CPF deve conter exatamente 11 n√∫meros!');
                return;
            }

            if (!aceite) {
                alert('‚ö†Ô∏è √â necess√°rio aceitar a Pol√≠tica de Privacidade para prosseguir!');
                return;
            }

            dadosColaborador.nome = nome;
            dadosColaborador.cpf = cpf;

            document.getElementById('etapa-identificacao').classList.add('hidden');
            document.getElementById('etapa-avaliacao').classList.remove('hidden');

            renderizarQuestoes();
            iniciarTimer();
        }

        // Renderizar quest√µes
        function renderizarQuestoes() {
            const container = document.getElementById('questoes-container');
            const totalQuestoes = questoes.length;
            
            document.getElementById('total-count').textContent = totalQuestoes;

            // Embaralhar quest√µes para evitar padr√µes
            const questoesEmbaralhadas = [...questoes].sort(() => Math.random() - 0.5);

            questoesEmbaralhadas.forEach((questao, index) => {
                const questaoDiv = document.createElement('div');
                questaoDiv.className = 'questao';
                if (questao.tipo === 'controle') {
                    questaoDiv.classList.add('controle');
                }
                questaoDiv.id = `questao-${questao.id}`;

                let tagHtml = '';
                if (questao.tipo === 'controle') {
                    tagHtml = '<span class="questao-tag">VALIDA√á√ÉO</span>';
                }

                questaoDiv.innerHTML = `
                    <div class="questao-header">
                        <span class="questao-numero">Quest√£o ${index + 1}</span>
                        ${tagHtml}
                    </div>
                    <h3>${questao.texto}</h3>
                    <div class="opcoes">
                        <div class="opcao">
                            <input type="radio" id="q${questao.id}-1" name="questao-${questao.id}" value="1" onchange="registrarResposta(${questao.id}, 1)">
                            <label for="q${questao.id}-1">1<br><small>Discordo totalmente</small></label>
                        </div>
                        <div class="opcao">
                            <input type="radio" id="q${questao.id}-2" name="questao-${questao.id}" value="2" onchange="registrarResposta(${questao.id}, 2)">
                            <label for="q${questao.id}-2">2<br><small>Discordo</small></label>
                        </div>
                        <div class="opcao">
                            <input type="radio" id="q${questao.id}-3" name="questao-${questao.id}" value="3" onchange="registrarResposta(${questao.id}, 3)">
                            <label for="q${questao.id}-3">3<br><small>Neutro</small></label>
                        </div>
                        <div class="opcao">
                            <input type="radio" id="q${questao.id}-4" name="questao-${questao.id}" value="4" onchange="registrarResposta(${questao.id}, 4)">
                            <label for="q${questao.id}-4">4<br><small>Concordo</small></label>
                        </div>
                        <div class="opcao">
                            <input type="radio" id="q${questao.id}-5" name="questao-${questao.id}" value="5" onchange="registrarResposta(${questao.id}, 5)">
                            <label for="q${questao.id}-5">5<br><small>Concordo totalmente</small></label>
                        </div>
                    </div>
                `;

                container.appendChild(questaoDiv);
            });
        }

        // Registrar resposta
        function registrarResposta(questaoId, valor) {
            const tempoResposta = Date.now();
            
            if (!dadosColaborador.respostas[questaoId]) {
                dadosColaborador.temposPorQuestao.push({
                    questaoId: questaoId,
                    tempo: tempoResposta
                });
            }

            dadosColaborador.respostas[questaoId] = valor;

            document.getElementById(`questao-${questaoId}`).classList.add('respondida');

            atualizarProgresso();
        }

        // Atualizar progresso
        function atualizarProgresso() {
            const totalQuestoes = questoes.length;
            const respondidas = Object.keys(dadosColaborador.respostas).length;
            const percentual = Math.round((respondidas / totalQuestoes) * 100);

            document.getElementById('respondidas-count').textContent = respondidas;
            document.getElementById('percentual-progresso').textContent = percentual + '%';
            document.getElementById('progress-bar').style.width = percentual + '%';

            if (respondidas === totalQuestoes) {
                document.getElementById('btn-finalizar').disabled = false;
            }
        }

        // Calcular resultado
        function calcularResultado() {
            let scores = {};
            let totalPorValor = {};

            // Inicializar contadores
            Object.keys(valoresCulturais).forEach(valorKey => {
                scores[valorKey] = 0;
                totalPorValor[valorKey] = 0;
            });

            // Processar respostas
            questoes.forEach(questao => {
                if (questao.tipo === 'normal' || questao.tipo === 'reversa' || questao.tipo === 'contraditorio') {
                    const resposta = dadosColaborador.respostas[questao.id];
                    if (resposta) {
                        let valorReal = resposta;
                        
                        // Inverter quest√µes reversas
                        if (questao.reversa) {
                            valorReal = 6 - resposta; // 5->1, 4->2, 3->3, 2->4, 1->5
                        }

                        scores[questao.valor] += valorReal;
                        totalPorValor[questao.valor]++;
                    }
                }
            });

            // Calcular percentuais
            let resultado = {
                valores: {},
                mediaGeral: 0
            };

            Object.keys(valoresCulturais).forEach(valorKey => {
                const valor = valoresCulturais[valorKey];
                const scoreTotal = scores[valorKey];
                const maxScore = totalPorValor[valorKey] * 5;
                const percentual = Math.round((scoreTotal / maxScore) * 100);

                resultado.valores[valorKey] = {
                    nome: valor.nome,
                    descricao: valor.descricao,
                    score: scoreTotal,
                    maxScore: maxScore,
                    percentual: percentual,
                    nivel: getNivelAderencia(percentual),
                    recomendacoes: getRecomendacoes(valorKey, percentual)
                };
            });

            // Calcular m√©dia geral
            const valores = Object.values(resultado.valores);
            resultado.mediaGeral = Math.round(
                valores.reduce((sum, v) => sum + v.percentual, 0) / valores.length
            );
            resultado.nivelGeral = getNivelAderencia(resultado.mediaGeral);

            return resultado;
        }

        // An√°lise de confiabilidade
        function analisarConfiabilidade() {
            const tempoTotal = (dadosColaborador.tempoFim - dadosColaborador.tempoInicio) / 1000; // em segundos
            const tempoMinutos = tempoTotal / 60;
            
            // 1. An√°lise de tempo
            const tempoIdealMin = 3; // 3 minutos
            const tempoIdealMax = 20; // 20 minutos
            const tempoMuitoRapido = tempoMinutos < tempoIdealMin;
            const tempoMuitoLento = tempoMinutos > tempoIdealMax;
            const tempoAdequado = !tempoMuitoRapido && !tempoMuitoLento;

            // 2. An√°lise de padr√£o de respostas
            const respostasArray = Object.values(dadosColaborador.respostas);
            const media = respostasArray.reduce((a, b) => a + b, 0) / respostasArray.length;
            
            // Calcular desvio padr√£o
            const variancia = respostasArray.reduce((sum, val) => sum + Math.pow(val - media, 2), 0) / respostasArray.length;
            const desvioPadrao = Math.sqrt(variancia);
            
            // Desvio muito baixo indica respostas muito uniformes (poss√≠vel autom√°tico)
            const padraoMuitoUniforme = desvioPadrao < 0.8;

            // 3. An√°lise de extremos (muitas respostas 1 ou 5)
            const count1 = respostasArray.filter(r => r === 1).length;
            const count5 = respostasArray.filter(r => r === 5).length;
            const percentualExtremos = ((count1 + count5) / respostasArray.length) * 100;
            const muitosExtremos = percentualExtremos > 70;

            // 4. An√°lise de desejabilidade social (quest√µes de controle)
            let scoreDesejabilidade = 0;
            let totalControle = 0;

            questoes.forEach(questao => {
                if (questao.tipo === 'controle') {
                    const resposta = dadosColaborador.respostas[questao.id];
                    if (resposta) {
                        totalControle++;
                        if (questao.subtipo === 'improvavel') {
                            // Respostas 4 ou 5 indicam desejabilidade social alta
                            if (resposta >= 4) scoreDesejabilidade += 2;
                            else if (resposta === 3) scoreDesejabilidade += 1;
                        } else if (questao.subtipo === 'honesto') {
                            // Respostas 1 ou 2 (negando imperfei√ß√µes) indicam desejabilidade
                            if (resposta <= 2) scoreDesejabilidade += 2;
                            else if (resposta === 3) scoreDesejabilidade += 1;
                        }
                    }
                }
            });

            const desejabilidadePercentual = (scoreDesejabilidade / (totalControle * 2)) * 100;
            const desejabilidadeMuitoAlta = desejabilidadePercentual > 60;

            // 5. An√°lise de consist√™ncia (pares contradit√≥rios)
            let inconsistencias = 0;
            
            questoes.forEach(questao => {
                if (questao.tipo === 'contraditorio' && questao.par) {
                    const respostaAtual = dadosColaborador.respostas[questao.id];
                    const respostaPar = dadosColaborador.respostas[questao.par];
                    
                    if (respostaAtual && respostaPar) {
                        // Inverter resposta da quest√£o contradit√≥ria para comparar
                        const respostaAtualInvertida = 6 - respostaAtual;
                        const diferenca = Math.abs(respostaAtualInvertida - respostaPar);
                        
                        // Diferen√ßa maior que 2 pontos indica inconsist√™ncia
                        if (diferenca > 2) {
                            inconsistencias++;
                        }
                    }
                }
            });

            const muitasInconsistencias = inconsistencias >= 3;

            // 6. Calcular score geral de confiabilidade
            let penalidades = 0;
            if (tempoMuitoRapido) penalidades += 20;
            if (tempoMuitoLento) penalidades += 10;
            if (padraoMuitoUniforme) penalidades += 15;
            if (muitosExtremos) penalidades += 15;
            if (desejabilidadeMuitoAlta) penalidades += 25;
            if (muitasInconsistencias) penalidades += 15;

            const scoreConfiabilidade = Math.max(0, 100 - penalidades);

            // 7. Determinar n√≠vel de confiabilidade
            let nivelConfiabilidade;
            if (scoreConfiabilidade >= 85) {
                nivelConfiabilidade = { classe: 'alta', texto: 'ALTA CONFIABILIDADE', cor: '#4CAF50' };
            } else if (scoreConfiabilidade >= 70) {
                nivelConfiabilidade = { classe: 'media', texto: 'CONFIABILIDADE MODERADA', cor: '#FF9800' };
            } else {
                nivelConfiabilidade = { classe: 'baixa', texto: 'BAIXA CONFIABILIDADE', cor: '#F44336' };
            }

            // 8. Gerar alertas
            const alertas = [];
            if (tempoMuitoRapido) {
                alertas.push('Tempo de resposta muito r√°pido - poss√≠vel falta de reflex√£o nas respostas');
            }
            if (tempoMuitoLento) {
                alertas.push('Tempo de resposta muito lento - poss√≠vel dificuldade de compreens√£o ou distra√ß√µes');
            }
            if (padraoMuitoUniforme) {
                alertas.push('Padr√£o de respostas muito uniforme - poss√≠vel resposta autom√°tica ou desatenta');
            }
            if (muitosExtremos) {
                alertas.push('Excesso de respostas extremas (1 ou 5) - poss√≠vel polariza√ß√£o nas respostas');
            }
            if (desejabilidadeMuitoAlta) {
                alertas.push('Alta desejabilidade social detectada - candidato pode estar tentando dar uma imagem excessivamente positiva');
            }
            if (muitasInconsistencias) {
                alertas.push('Inconsist√™ncias detectadas entre respostas contradit√≥rias - poss√≠vel falta de sinceridade ou aten√ß√£o');
            }

            return {
                scoreConfiabilidade: scoreConfiabilidade,
                nivel: nivelConfiabilidade,
                indicadores: {
                    tempo: {
                        valor: tempoMinutos.toFixed(1),
                        status: tempoAdequado ? 'ok' : 'alerta',
                        label: 'Tempo Total',
                        descricao: tempoMuitoRapido ? 'Muito r√°pido' : tempoMuitoLento ? 'Muito lento' : 'Adequado'
                    },
                    desvioPadrao: {
                        valor: desvioPadrao.toFixed(2),
                        status: padraoMuitoUniforme ? 'alerta' : 'ok',
                        label: 'Varia√ß√£o de Respostas',
                        descricao: padraoMuitoUniforme ? 'Muito uniforme' : 'Adequada'
                    },
                    extremos: {
                        valor: percentualExtremos.toFixed(0) + '%',
                        status: muitosExtremos ? 'alerta' : 'ok',
                        label: 'Respostas Extremas',
                        descricao: muitosExtremos ? 'Excesso de extremos' : 'Distribui√ß√£o normal'
                    },
                    desejabilidade: {
                        valor: desejabilidadePercentual.toFixed(0) + '%',
                        status: desejabilidadeMuitoAlta ? 'alerta' : 'ok',
                        label: 'Desejabilidade Social',
                        descricao: desejabilidadeMuitoAlta ? 'Muito alta' : 'Normal'
                    },
                    consistencia: {
                        valor: inconsistencias,
                        status: muitasInconsistencias ? 'alerta' : 'ok',
                        label: 'Inconsist√™ncias',
                        descricao: muitasInconsistencias ? inconsistencias + ' detectadas' : 'Respostas consistentes'
                    }
                },
                alertas: alertas,
                recomendacaoRH: scoreConfiabilidade < 70 ? 
                    'RECOMENDA√á√ÉO: Realizar entrevista comportamental complementar para validar respostas.' :
                    scoreConfiabilidade < 85 ?
                    'SUGEST√ÉO: Considerar entrevista adicional para esclarecer alguns pontos.' :
                    'Respostas parecem confi√°veis e aut√™nticas.'
            };
        }

        // Finalizar avalia√ß√£o
        function finalizarAvaliacao() {
            pararTimer();
            
            dadosColaborador.resultado = calcularResultado();
            dadosColaborador.analiseConfiabilidade = analisarConfiabilidade();
            
            mostrarResultado();
        }

        // Obter n√≠vel de ader√™ncia
        function getNivelAderencia(percentual) {
            if (percentual >= 85) return { texto: 'Excelente', cor: '#4CAF50', descricao: 'Fortemente alinhado' };
            if (percentual >= 70) return { texto: 'Bom', cor: '#8BC34A', descricao: 'Bem alinhado' };
            if (percentual >= 55) return { texto: 'Adequado', cor: '#B3B3B3', descricao: 'Parcialmente alinhado' };
            if (percentual >= 40) return { texto: 'Em desenvolvimento', cor: '#FF9800', descricao: 'Precisa aten√ß√£o' };
            return { texto: 'Necessita desenvolvimento', cor: '#F44336', descricao: 'Requer a√ß√£o imediata' };
        }

        // Obter recomenda√ß√µes
        function getRecomendacoes(valorId, percentual) {
            const recomendacoesPorValor = {
                comprometimento: {
                    baixo: [
                        'Estabele√ßa metas pessoais alinhadas aos objetivos da empresa',
                        'Pratique a gest√£o de tempo e prioriza√ß√£o de tarefas',
                        'Busque entender o impacto do seu trabalho nos resultados da equipe'
                    ],
                    medio: [
                        'Assuma voluntariamente projetos desafiadores',
                        'Desenvolva autonomia para resolver problemas',
                        'Proponha melhorias nos processos da sua √°rea'
                    ],
                    alto: [
                        'Compartilhe suas pr√°ticas de comprometimento com a equipe',
                        'Mentore colaboradores que precisam desenvolver este valor',
                        'Continue sendo exemplo de dedica√ß√£o e responsabilidade'
                    ]
                },
                trabalho_seguro: {
                    baixo: [
                        'Participe ativamente de todos os treinamentos de seguran√ßa',
                        'Revise diariamente as normas de seguran√ßa da sua fun√ß√£o',
                        'Observe colaboradores experientes e aprenda com suas pr√°ticas'
                    ],
                    medio: [
                        'Torne-se multiplicador de boas pr√°ticas de seguran√ßa',
                        'Sugira melhorias nos procedimentos de seguran√ßa',
                        'Documente e compartilhe li√ß√µes aprendidas'
                    ],
                    alto: [
                        'Seja refer√™ncia em seguran√ßa para toda a equipe',
                        'Lidere campanhas e iniciativas de seguran√ßa',
                        'Continue sendo vigilante e proativo na preven√ß√£o'
                    ]
                },
                ambiente_saudavel: {
                    baixo: [
                        'Pratique escuta ativa com seus colegas',
                        'Participe de atividades de integra√ß√£o da equipe',
                        'Desenvolva intelig√™ncia emocional e empatia'
                    ],
                    medio: [
                        'Seja mediador em situa√ß√µes de conflito',
                        'Reconhe√ßa e valorize o trabalho dos colegas publicamente',
                        'Promova momentos de descontra√ß√£o e integra√ß√£o'
                    ],
                    alto: [
                        'Seja exemplo de relacionamento saud√°vel',
                        'Mentore outros sobre conviv√™ncia respeitosa',
                        'Continue promovendo clima positivo e colaborativo'
                    ]
                },
                foco_resultado: {
                    baixo: [
                        'Aprenda a estabelecer metas SMART (espec√≠ficas, mensur√°veis, ating√≠veis)',
                        'Acompanhe seus indicadores de desempenho regularmente',
                        'Elimine distra√ß√µes e melhore sua produtividade'
                    ],
                    medio: [
                        'Busque otimizar processos e aumentar efici√™ncia',
                        'Compartilhe m√©tricas de resultado com a equipe',
                        'Antecipe problemas e proponha solu√ß√µes preventivas'
                    ],
                    alto: [
                        'Compartilhe suas estrat√©gias de alta performance',
                        'Auxilie na defini√ß√£o de metas desafiadoras para a equipe',
                        'Continue superando expectativas e inspirando outros'
                    ]
                },
                mentalidade_crescimento: {
                    baixo: [
                        'Encare erros como oportunidades de aprendizado',
                        'Busque cursos e treinamentos na sua √°rea',
                        'Saia da zona de conforto aceitando novos desafios'
                    ],
                    medio: [
                        'Compartilhe conhecimentos com a equipe',
                        'Busque mentoria com profissionais mais experientes',
                        'Desenvolva novas habilidades constantemente'
                    ],
                    alto: [
                        'Seja mentor de outros colaboradores',
                        'Lidere projetos de inova√ß√£o e melhoria',
                        'Continue sendo exemplo de evolu√ß√£o cont√≠nua'
                    ]
                }
            };

            const nivel = percentual < 55 ? 'baixo' : percentual < 75 ? 'medio' : 'alto';
            return recomendacoesPorValor[valorId][nivel];
        }

        // Mostrar resultado
        function mostrarResultado() {
            const resultado = dadosColaborador.resultado;
            const confiabilidade = dadosColaborador.analiseConfiabilidade;
            
            document.getElementById('etapa-avaliacao').classList.add('hidden');
            document.getElementById('etapa-resultado').classList.remove('hidden');
            
            // Resultado geral
            document.getElementById('resultado-nome-colaborador').textContent = dadosColaborador.nome;
            document.getElementById('percentual-geral').textContent = resultado.mediaGeral + '%';
            document.getElementById('percentual-geral').style.color = resultado.nivelGeral.cor;
            
            const nivelBadge = document.getElementById('nivel-geral');
            nivelBadge.textContent = resultado.nivelGeral.texto;
            nivelBadge.style.backgroundColor = resultado.nivelGeral.cor;
            
            document.getElementById('descricao-nivel').textContent = resultado.nivelGeral.descricao;

            // Painel de Confiabilidade
            const scoreConf = document.getElementById('score-confiabilidade');
            scoreConf.textContent = confiabilidade.scoreConfiabilidade + '%';
            scoreConf.className = 'confiabilidade-score ' + confiabilidade.nivel.classe;
            scoreConf.innerHTML += `<div style="font-size: 18px; margin-top: 10px;">${confiabilidade.nivel.texto}</div>`;

            // Indicadores
            const indicadoresContainer = document.getElementById('indicadores-container');
            indicadoresContainer.innerHTML = '';
            
            Object.keys(confiabilidade.indicadores).forEach(key => {
                const ind = confiabilidade.indicadores[key];
                const indDiv = document.createElement('div');
                indDiv.className = 'indicador-item ' + ind.status;
                indDiv.innerHTML = `
                    <div class="indicador-label">${ind.label}</div>
                    <div class="indicador-value">${ind.valor}</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">${ind.descricao}</div>
                `;
                indicadoresContainer.appendChild(indDiv);
            });

            // Alertas
            const alertasContainer = document.getElementById('alertas-container');
            alertasContainer.innerHTML = '';
            
            if (confiabilidade.alertas.length > 0) {
                const alertaBox = document.createElement('div');
                alertaBox.className = 'alerta-box';
                alertaBox.innerHTML = `
                    <h4>‚ö†Ô∏è Pontos de Aten√ß√£o Detectados:</h4>
                    <ul>
                        ${confiabilidade.alertas.map(alerta => `<li>${alerta}</li>`).join('')}
                    </ul>
                    <p style="margin-top: 15px; font-weight: 600; color: #1565C0;">
                        üìã ${confiabilidade.recomendacaoRH}
                    </p>
                `;
                alertasContainer.appendChild(alertaBox);
            } else {
                const okBox = document.createElement('div');
                okBox.style.cssText = 'background: #E8F5E9; border-left: 4px solid #4CAF50; padding: 15px; border-radius: 8px; margin-top: 15px;';
                okBox.innerHTML = `
                    <h4 style="color: #2E7D32; margin-bottom: 8px;">‚úÖ An√°lise de Confiabilidade</h4>
                    <p style="color: #388E3C;">${confiabilidade.recomendacaoRH}</p>
                `;
                alertasContainer.appendChild(okBox);
            }
            
            // Valores
            const valoresContainer = document.getElementById('valores-container');
            valoresContainer.innerHTML = '';
            
            Object.keys(resultado.valores).forEach(valorKey => {
                const valor = resultado.valores[valorKey];
                
                const valorDiv = document.createElement('div');
                valorDiv.className = 'valor-resultado';
                
                valorDiv.innerHTML = `
                    <div class="valor-resultado-header">
                        <div>
                            <h3>${valor.nome}</h3>
                            <div class="valor-resultado-desc">${valor.descricao}</div>
                        </div>
                        <div class="valor-score">
                            <div class="valor-percentual" style="color: ${valor.nivel.cor}">${valor.percentual}%</div>
                            <div class="valor-badge" style="background-color: ${valor.nivel.cor}">${valor.nivel.texto}</div>
                        </div>
                    </div>
                    <div class="progress-bar-container" style="margin-bottom: 0;">
                        <div class="progress-bar" style="width: ${valor.percentual}%; background-color: ${valor.nivel.cor}"></div>
                    </div>
                    ${valor.percentual < 85 ? `
                        <div class="recomendacoes-box">
                            <h4>‚ö° Como melhorar neste valor:</h4>
                            <ul>
                                ${valor.recomendacoes.map(rec => `<li>${rec}</li>`).join('')}
                            </ul>
                        </div>
                    ` : ''}
                `;
                
                valoresContainer.appendChild(valorDiv);
            });
            
            window.scrollTo(0, 0);
        }

        // Enviar resultado
        function enviarResultado() {
            const btn = document.getElementById('btn-enviar');
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner"></span> Enviando...';
            
            const resultado = dadosColaborador.resultado;
           // Enviar resultado real via Formspree
async function enviarResultado() {
    const btn = document.getElementById('btn-enviar');
    btn.disabled = true;
    btn.innerHTML = '<span class="spinner"></span> Enviando...';

    const resultado = dadosColaborador.resultado;
    const confiabilidade = dadosColaborador.analiseConfiabilidade;

    const emailData = {
        nome: dadosColaborador.nome,
        cpf: dadosColaborador.cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4'),
        data: new Date().toLocaleString('pt-BR'),
        mediaGeral: resultado.mediaGeral,
        nivelGeral: resultado.nivelGeral.texto,
        confiabilidade: confiabilidade.scoreConfiabilidade,
        nivelConfiabilidade: confiabilidade.nivel.texto,
    };

    try {
        const response = await fetch("https://formspree.io/f/xnnqaoqe", { // üëà substitua aqui pelo seu endpoint
            method: "POST",
            headers: { "Accept": "application/json" },
            async function enviarResultado() {
    const btn = document.getElementById('btn-enviar');
    btn.disabled = true;
    btn.innerHTML = '<span class="spinner"></span> Enviando...';

    const resultado = dadosColaborador.resultado;
    const confiabilidade = dadosColaborador.analiseConfiabilidade;

    const dados_de_e_mail = {
        nome: dadosColaborador.nome,
        cpf: dadosColaborador.cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4'),
        data: new Date().toLocaleDateString('pt-BR') + ' √†s ' + new Date().toLocaleTimeString('pt-BR'),
        midiaGeral: resultado.mediaGeral,
        nivelGeral: resultado.nivelGeral.texto,
        confiabilidade: confiabilidade.scoreConfiabilidade,
        nivelConfiabilidade: confiabilidade.nivel.texto
    };

    try {
        const resposta = await fetch("https://formspree.io/f/xnnqaoqe", { // ‚ùå Esse link antigo
            method: "POST",
            headers: { "Accept": "application/json" },
            body: JSON.stringify(dados_de_e_mail)
        });

        if (resposta.ok) {
            alert("‚úÖ Resultado enviado com sucesso para o RH!");
        } else {
            alert("‚ö†Ô∏è Erro ao enviar o resultado. Verifique o endpoint Formspree.");
        }
    } catch (erro) {
        console.error(erro);
        alert("‚ùå Falha na conex√£o. Tente novamente mais tarde.");
    } finally {
        btn.disabled = false;
    }
}
